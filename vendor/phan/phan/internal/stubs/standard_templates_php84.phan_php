<?php

/**
 * Stub file for standard library functions with template support (PHP 8.4) functions with template support
 *
 * This file provides template type annotations for standard library functions
 * that preserve types through transformations. These annotations are not
 * available from PHP reflection.
 *
 * @phan-file-suppress PhanRedefinedFunction
 *
 * This version is for PHP 8.4 and excludes functions added in PHP 8.5.
 * For PHP 8.5+, use standard_templates.phan_php instead.
 */

namespace {

/**
 * @template TKey
 * @template TValue
 * @param array<TKey, TValue> $array
 * @param callable(TValue, TKey): bool $callback
 * @return TValue|null
 * @since 8.4
 */
function array_find(array $array, callable $callback): mixed {}

/**
 * @template TKey
 * @template TValue
 * @param array<TKey, TValue> $array
 * @param callable(TValue, TKey): bool $callback
 * @return TKey|null
 * @since 8.4
 */
function array_find_key(array $array, callable $callback): mixed {}

/**
 * @template TKey
 * @template TValue
 * @param array<TKey, TValue> $array
 * @param callable(TValue, TKey): bool $callback
 * @return bool
 * @since 8.4
 */
function array_any(array $array, callable $callback): bool {}

/**
 * @template TKey
 * @template TValue
 * @param array<TKey, TValue> $array
 * @param callable(TValue, TKey): bool $callback
 * @return bool
 * @since 8.4
 */
function array_all(array $array, callable $callback): bool {}

// Note: array_filter, array_map, array_reduce, array_keys, and array_values
// have been removed from this stub file because they have plugin-based return type
// overrides in ArrayReturnTypeOverridePlugin which provide more sophisticated
// type inference. See issue #5276.

/**
 * @template TKey
 * @template TValue
 * @param array<TKey, TValue> $array
 * @return array<TValue, TKey>
 */
function array_flip(array $array): array {}

}
